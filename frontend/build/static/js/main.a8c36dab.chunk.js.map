{"version":3,"sources":["serviceWorker.js","helpers/PublicRoute.js","components/Constants.js","components/containers/chat/Message.js","components/containers/chat/Messages.js","components/containers/chat/ChatInput.js","components/containers/chat/Feedback.js","components/containers/chat/About.js","components/containers/chat/ChatApp.js","components/elements/header.js","App.js","index.js","redux/reducers/userReducer.js","redux/reducers/index.js","redux/store.js","helpers/ApiRequest.js","redux/actions/userAction.js","lib/vad.js"],"names":["window","_","require","$","jQuery","Boolean","location","hostname","match","PublicRoute","Component","component","rest","render","props","response","request","store","Message","chartReference","React","createRef","state","m_index","right_card_open","drop_mode","learn_more_folder_css","learn_more_chart_css","chart_data","labels","datasets","data","backgroundColor","hoverBackgroundColor","options","scales","yAxes","ticks","beginAtZero","onParamButtonClick","bind","onOpenSearX","onViewIFrame","onFolderButtonClick","prevProps","prevState","snapshot","this","message","messageType","Constants","WEATHER_MESSAGE","myWidgetParam","filter","containerid","length","push","id","cityid","messageData","appid","units","weather_unit","default","dispatch","type","messages","user","url_obj","query","index","i_url","toLocaleLowerCase","encodeURIComponent","suggestion","encodeURI","web_url","open","event","uri","label","preventDefault","isAdmin","onSend","PARAMETER_MESSAGE","payload","i","intervalSize","colorRangeInfo","colorStart","colorEnd","useEndAsStart","dataLength","colorScale","colorPoint","colorArray","calculatePoint","s","document","getElementsByTagName","script","createElement","async","charset","src","parentNode","insertBefore","excluded","WIKIQUOTE_MESSAGE","OPEN_SITE_MESSAGE","CAROUSEL_MESSAGE","GENERIC_MESSAGE","fromBot","indexOf","className","querySelector","scrollBy","msgDiv","FIND_MESSAGE","info_boxes","infobox","style","display","width","img_src","content","substr","split","map","line","key","suggestions","href","onClick","cursor","color","marginRight","aria-hidden","right_mode","onCloseRightCard","urls","title","position","top","onOpenNewWeb","url","border","paddingTop","paddingBottom","textAlign","fontSize","text","fontStyle","maxWidth","set_more","height","padding","marginLeft","Math","round","score","scrollToPrevPage","scrollToNextPage","scrollToPrevMorePage","scrollToNextMorePage","arrays","list","image","index3","main_weather","onChangeTemperatureUnit","set_more_weather","more_weather","overflow","clear_more_weather","IMAGE_MESSAGE","TEXT_MESSAGE","SMART_REPLY_MESSAGE","smartReplies","reply","BUTTON_TEXT_MESSAGE","buttons","button","buttonType","BUTTON_LINK","target","BUTTON_PARAM","data-param","LOADING_MESSAGE","renderBotDiv","defaultProps","connect","ownProps","Messages","setState","clear_main_weather","more","vm","setTimeout","set_main_weather","remove","ChangeStateFunc","weather_api_key","messageLength","element","getElementById","last","parent","animate","scrollTop","offset","images","splice","scrollToMessage","loading","ChatInput","startRecord","isRecording","stopRecording","AudioContext","webkitAudioContext","audioContext","sampleRate","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","audio","startUserMedia","e","console","log","then","catch","mediaRecorder","stop","set_stopRecording","exportWAV","createFileLink","close","stream","analyser","createAnalyser","source","createMediaStreamSource","Recorder","numChannels","record","VAD","voice_stop","voice_start","blob","waitForRespose","audioURL","URL","createObjectURL","XMLHttpRequest","responseType","onload","reader","FileReader","readAsDataURL","el","sendMessageToBot","result","send","playMedia","audioPath","setAttribute","EMPTY_TYPE","socket","emit","room","userId","onControlMic","createSocket","isFlyoutOpen","toggleOverlay","onSetSound","isSound","inputMargin","undefined","canvas","ctx","canvasHeight","canvasWidth","countFrame","recordTime","chatInput","showSendButton","sendDisabled","submitHandler","textChangeHandler","inputFocus","inputBlur","toggleFlyout","onFlyoutOptionClick","coordinate_lat","coordinate_long","lat","long","showOverlay","hideOverlay","value","showFeedback","showAbout","showStart","sendButtonClass","flyoutClass","onSubmit","onChange","placeholder","autoComplete","onFocus","onBlur","left","Feedback","submitDisabled","description","getUrlParam","titleChangeHandler","descriptionChangeHandler","onCloseClick","onSubmitClick","name","decodeURIComponent","search","replace","RegExp","setSubmitState","hide","snackbar","submit_snackbar","timeout","ajax","headers","dataType","JSON","stringify","success","error","submitClass","isOpen","contentLabel","background","right","bottom","rows","About","Modal","setAppElement","mm","ref","zIndex","ChatApp","getLocation","geolocation","getCurrentPosition","getUserPosition","handleLocationAccessError","coordinate","coords","latitude","longitude","makeRequest","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","audio_play","Promise","resolve","reject","preload","autoplay","onerror","onended","getIncomingMessage","link","bot_messages","playPromise","play","object","response_obj","parse","weather_city_id","messageData_item","overlay","uuid","getUuid","sendHandler","showFeedbackModal","hideFeedbackModal","showAboutModal","hideAboutModal","script1","sound_link","renderMessages","d","Date","getTime","c","r","random","floor","toString","localStorage","getItem","generateUuid","setItem","WebHookAction","msg","hasOwnProperty","addMessage","restart","HELP","START","forEach","messageObject","username","removeSmartReplies","msgs","logout","Header","isSideNavOpen","class_sideNavOpen","changeSideNav","select_regulars_header","M","Sidenav","init","slide_out","edge","from","getInstance","c_id","role","margin","data-target","App","cookies","Fragment","path","exact","ReactDOM","StrictMode","basename","serviceWorker","ready","registration","unregister","initialState","baseUrl","protocol","reducer","combineReducers","action","middlewares","thunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","rootReducer","applyMiddleware","ApiRequest","method","redux_state","getState","URLSearchParams","fetch","body","status","json","token","Authorization","DATA_UPDATE_PENDING","post","exception","errors","custom","city_id","option","fftSize","bufferLen","smoothingTimeConstant","energy_offset","energy_threshold_ratio_pos","energy_threshold_ratio_neg","energy_integration","f","v","context","Error","hertzPerBin","iterationFrequency","iterationPeriod","setFilter","shape","iLen","j","jLen","vadState","energy_threshold_pos","energy_threshold_neg","voiceTrend","voiceTrendMax","voiceTrendMin","voiceTrendStart","voiceTrendEnd","floatFrequencyData","Float32Array","frequencyBinCount","floatFrequencyDataLinear","scriptProcessorNode","createScriptProcessor","destination","self","onaudioprocess","getFloatFrequencyData","update","monitor","logging","log_i","log_limit","triggerLog","limit","fft","pow","getEnergy","energy","signal","start","end","integration"],"mappings":"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","file":"static/js/main.a8c36dab.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nwindow._ = require('lodash');\nwindow.$ = window.jQuery = require('jquery');\nrequire('jquery');\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","\nimport { Route } from 'react-router-dom'\nimport React, { Component } from 'react'\n\n\nconst store = require( '../redux/store')\n\n\nexport default function PublicRoute({ component: Component, ...rest }) {\n\n    return (\n        <Route\n            {...rest}\n            render={props =>{\n\n                return (\n                    <Component {...props} />\n                )\n\n\n            }\n\n            }\n        />\n    );\n}\n","export const response = {\n    ResponseType: {\n        'WIKIQUOTE_MESSAGE':'wikiquote',\n        'OPEN_SITE_MESSAGE':'open_site',\n        'CAROUSEL_MESSAGE':'cardsCarousel',\n        'WEATHER_MESSAGE':'weather',\n        'IMAGE_MESSAGE':'image',\n        'TEXT_MESSAGE': 'text',\n        'GENERIC_MESSAGE': 'generalSearch',\n        'FIND_MESSAGE': 'findSearch',\n        'BUTTON_TEXT_MESSAGE': 'button_text',\n        'SMART_REPLY_MESSAGE': 'smart_reply',\n        'LOADING_MESSAGE': 'loading',\n        'BUTTON_LINK': 'link',\n        'BUTTON_PARAM': 'param'\n    }\n};\n\nexport const request = {\n    RequestType: {\n        'TEXT_MESSAGE': 'text',\n        'PARAMETER_MESSAGE': 'parameter'\n    },\n    ParameterType: {\n        'START': 'start',\n        'HELP': 'help',\n        'CHECK_SERVICE': 'check_service'\n    }\n};","import _ from \"lodash\";\nimport React from 'react';\nimport * as Constants from '../../Constants';\n// import {CarrotAPIAction, WebHookAction} from \"../../../redux/actions/userAction\";\nimport connect from 'react-redux/es/connect/connect'\n\n\n//Optional include of the default css styles\n\nimport Iframe from \"react-iframe\";\nconst store = require( '../../../redux/store');\n\nclass Message extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.chartReference = React.createRef();\n        this.state = {\n\n            m_index:null,\n            right_card_open :false,\n            drop_mode:'',\n            learn_more_folder_css:'learn-more-button',\n            learn_more_chart_css:'learn-more-button',\n            chart_data: {\n                labels: [\n                    'Red',\n                    'Blue',\n                    'Yellow'\n                ],\n                datasets: [{\n                    data: [300, 50, 100],\n                    backgroundColor: [\n                        '#FF6384',\n                        '#36A2EB',\n                        '#FFCE56'\n                    ],\n                    hoverBackgroundColor: [\n                        '#FF6384',\n                        '#36A2EB',\n                        '#FFCE56'\n                    ]\n                }]\n            },\n            options: {\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            beginAtZero: true\n                        }\n                    }]\n                }\n            }\n        }\n        // this.getChartData = this.getChartData.bind(this);\n        this.onParamButtonClick = this.onParamButtonClick.bind(this);\n        this.onOpenSearX = this.onOpenSearX.bind(this);\n        this.onViewIFrame = this.onViewIFrame.bind(this);\n\n        this.onFolderButtonClick = this.onFolderButtonClick.bind(this);\n        // this.onChartButtonClick = this.onChartButtonClick.bind(this);\n\n    }\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n\n    }\n    componentDidMount() {\n        if(this.props.message.messageType === Constants.response.ResponseType.WEATHER_MESSAGE ){\n            let myWidgetParam = this.props.myWidgetParam;\n            let op_15 = _.filter(myWidgetParam, { containerid:'openweathermap-widget-' + this.props.m_index });\n\n            if(op_15.length < 1){\n                myWidgetParam.push({id: 15, cityid: this.props.message.messageData[0]['weather_city_id'],appid: '3b1c3da41643a03de9516d4deb798f7b',\n                    units: this.props.weather_unit,containerid: 'openweathermap-widget-' + this.props.m_index,  });\n            }\n            store.default.dispatch({\n                type:'UPDATE_MESSAGES',\n                myWidgetParam:myWidgetParam\n            });\n\n\n\n        }\n\n    }\n\n    onCloseRightCard(){\n        let messages = this.props.user.messages;\n        messages[this.props.m_index]['message']['right_mode'] = '';\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        });\n    }\n    set_more(){\n        let messages = this.props.user.messages;\n        messages[this.props.m_index]['message']['right_mode'] = 'more';\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        });\n    }\n    onViewIFrame(url_obj, query, index){\n        let i_url = url_obj['url'];\n        if(url_obj['title'].toLocaleLowerCase() ==='wikipedia'){\n            i_url = \"https://wikipedia.outstep.com/search?content=wikipedia_en_all_maxi&pattern=\" + encodeURIComponent(query)\n        }\n        let messages = this.props.user.messages;\n        if(messages[this.props.m_index]['message']['right_mode'] === 'iframe'){\n            messages[this.props.m_index]['message']['right_mode'] = '';\n        } else {\n\n            messages[this.props.m_index]['message']['right_mode'] = 'iframe';\n        }\n        messages[this.props.m_index]['message']['i_url'] = i_url;\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        });\n\n    }\n    onOpenSearX(suggestion){\n        let messages = this.props.user.messages;\n        messages[this.props.m_index]['message']['right_mode'] = 'iframe';\n        messages[this.props.m_index]['message']['i_url'] = \"https://metasearch.outstep.com/?categories=general&language=en-US&q=\" + encodeURI(suggestion);\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        });\n\n\n    }\n\n    onFolderButtonClick(query, index){\n        let messages = this.props.user.messages;\n        if(messages[this.props.m_index]['message']['drop_mode'] ==='suggestion'){\n            messages[this.props.m_index]['message']['drop_mode'] = '';\n\n        }else{\n\n            messages[this.props.m_index]['message']['drop_mode'] = 'suggestion';\n        }\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        });\n\n    }\n\n\n    onOpenNewWeb(web_url){\n        window.open(web_url);\n    }\n\n\n\n    // Label is used internally to show what user has clicked on\n    onParamButtonClick(event, uri, label) {\n        event.preventDefault();\n        if (!this.props.isAdmin) {\n            this.props.onSend({\n                messageType: Constants.request.RequestType.PARAMETER_MESSAGE,\n                messageData: [{payload: uri, label: label}]\n            });\n        }\n    }\n    calculatePoint(i, intervalSize, colorRangeInfo) {\n        var { colorStart, colorEnd, useEndAsStart } = colorRangeInfo;\n        return (useEndAsStart\n            ? (colorEnd - (i * intervalSize))\n            : (colorStart + (i * intervalSize)));\n    }\n    interpolateColors(dataLength, colorScale, colorRangeInfo) {\n        var { colorStart, colorEnd } = colorRangeInfo;\n        var colorRange = colorEnd - colorStart;\n        var intervalSize = colorRange / dataLength;\n        var i, colorPoint;\n        var colorArray = [];\n\n        for (i = 0; i < dataLength; i++) {\n            colorPoint = this.calculatePoint(i, intervalSize, colorRangeInfo);\n            colorArray.push(colorScale(colorPoint));\n        }\n\n        return colorArray;\n    }\n    // getChartData(){\n    //     let chart_data = [];\n    //     let learn_more_folder_css = 'learn-more-button';\n    //     let learn_more_chart_css = 'learn-more-button';\n    //     if(this.props.message.messageType === Constants.response.ResponseType.GENERIC_MESSAGE){\n    //\n    //         let colorScale = d3.interpolateInferno;\n    //         const colorRangeInfo = {\n    //             colorStart: 0.1,\n    //             colorEnd: 1,\n    //             useEndAsStart: false,\n    //         };\n    //\n    //         if(this.props.carrot_data && this.props.carrot_data.clusters){\n    //             let labels =  _.map(this.props.carrot_data.clusters, function(o){return o.phrases[0]});\n    //             let data =  _.map(this.props.carrot_data.clusters, function(o){return o.size});\n    //\n    //             var COLORS = this.interpolateColors(labels.length, colorScale, colorRangeInfo);\n    //             let datasets = [{\n    //                 data,\n    //                 backgroundColor: COLORS,\n    //                 hoverBackgroundColor: COLORS,\n    //             }]\n    //             chart_data = {labels, datasets}\n    //         }\n    //\n    //         if(this.props.message.drop_mode === 'folder'){\n    //             learn_more_folder_css = 'learn-more-button active'\n    //         }\n    //         if(this.props.message.drop_mode === 'chart'){\n    //             learn_more_chart_css = 'learn-more-button active'\n    //         }\n    //\n    //\n    //\n    //     }\n    //     return {chart_data, learn_more_folder_css, learn_more_chart_css};\n    //\n    //\n    // }\n\n    renderBotDiv() {\n        if(this.props.message.messageType === Constants.response.ResponseType.WEATHER_MESSAGE){\n            window.myWidgetParam = this.props.myWidgetParam;\n\n            var s = document.getElementsByTagName('script')[0];\n            var script = document.createElement('script');\n            script.async = true;\n            script.charset = \"utf-8\";\n            script.src = \"//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js\";\n            s.parentNode.insertBefore(script, s);\n\n        }\n\n\n        // If message is from bot and messageType not carousel then show the bot icon\n        var excluded = [\n            Constants.response.ResponseType.WIKIQUOTE_MESSAGE,\n            Constants.response.ResponseType.OPEN_SITE_MESSAGE,\n            Constants.response.ResponseType.CAROUSEL_MESSAGE,\n            Constants.response.ResponseType.GENERIC_MESSAGE,\n            Constants.response.ResponseType.WEATHER_MESSAGE\n        ];\n\n        // Only show DBpedia icon for messages which are from bot and not carousel or smart reply\n        if (this.props.fromBot && excluded.indexOf(this.props.message.messageType) === -1) {\n            return (\n                <div className=\"btn btn-default btn-fab btn-fab-mini pull-left fadeIn bot-icon\">\n                    <img src=\"/images/favicon.png\" />\n                </div>\n            );\n        }\n        if (this.props.fromBot && this.props.message.messageType === Constants.response.ResponseType.WIKIQUOTE_MESSAGE) {\n            return (\n                <div className=\"btn btn-default btn-fab btn-fab-mini pull-left fadeIn bot-icon\">\n                    <img src=\"/images/wikiquote-logo.png\" />\n                </div>\n            );\n        }\n\n    }\n    scrollToPrevPage(){\n        const card = document.querySelector(\"#paginated_cards_\" + this.props.m_index);\n        const card_scroller = card.querySelector(\".cards_scroller\");\n        var card_item_size = 225;\n        card_scroller.scrollBy(-card_item_size, 0);\n    }\n    scrollToNextPage(){\n        const card = document.querySelector(\"#paginated_cards_\" + this.props.m_index);\n        const card_scroller = card.querySelector(\".cards_scroller\");\n        var card_item_size = 225;\n        card_scroller.scrollBy(card_item_size, 0);\n    }\n\n    scrollToPrevMorePage(){\n        const card = document.querySelector(\"#paginated_cards_more_\" + this.props.m_index);\n        const card_scroller = card.querySelector(\".cards_scroller_more\");\n        var card_item_size = 225;\n        card_scroller.scrollBy(-card_item_size, 0);\n    }\n    scrollToNextMorePage(){\n        const card = document.querySelector(\"#paginated_cards_more_\" + this.props.m_index);\n        const card_scroller = card.querySelector(\".cards_scroller_more\");\n        var card_item_size = 225;\n        card_scroller.scrollBy(card_item_size, 0);\n    }\n\n    render() {\n        // const {chart_data, learn_more_folder_css, learn_more_chart_css} = this.getChartData();\n        const fromBot = this.props.fromBot ? 'pull-left bubble-bot' : 'pull-right bubble-user';\n        const messageData = this.props.message.messageData;\n        let msgDiv = '';\n        switch(this.props.message.messageType) {\n            case Constants.response.ResponseType.FIND_MESSAGE:\n                msgDiv = (\n                    <div className=\"carousel-container \">\n                        {messageData.info_boxes && messageData.info_boxes[0].infobox &&\n                        <div className=\"carousel-item\">\n                            <div className=\"card\" style={{display:\"table\",width:\"40%\"}}>\n                                <div className=\"summary\">\n                                    <div className=\"img-wrapper\">\n                                        <img style={{width:\"100px\"}} src={messageData.info_boxes[0].img_src?messageData.info_boxes[0].img_src:\"/images/logo-middle.png\"} />\n                                    </div>\n                                    <div className=\"content\">\n                                        {messageData.info_boxes[0].infobox && (\n                                            <div className=\"title wrap-word\">\n                                                {messageData.info_boxes[0].infobox}\n                                            </div>\n                                        )}\n\n                                        {messageData.info_boxes[0].content && (\n                                            <div className=\"text wrap-word\">\n                                                {messageData.info_boxes[0].content.substr(0, 200).split('\\n').map((line, index) => {\n                                                    return <div key={index}>{line}</div>;\n                                                })}\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n\n                                <div className=\"button-group\">\n                                    {messageData.suggestions &&\n                                    <a href=\"#\" className=\"btn btn-block btn-primary\" onClick={() => this.onFolderButtonClick(messageData.info_boxes[0].infobox, this.props.m_index)}>\n                                        <span>LEARN MORE</span>\n\n                                        <span className={this.state.learn_more_folder_css}>( Suggestions )</span>\n                                    </a>\n                                    }\n                                </div>\n\n                                {messageData.suggestions && this.props.message.drop_mode ==='suggestion' && (\n                                    <div className=\"folder-summary\" >\n                                        <div className=\"carrot-folder-list\">\n                                            {messageData.suggestions.map((suggestion, index)=>{\n                                                return <div className={\"valign-wrapper\"} style={{cursor: \"pointer\"}} key={index} onClick={()=>this.onOpenSearX(suggestion)}>\n                                                    <span  style={{color:\"#f9c44c\", marginRight:\"5px\"}} className=\"glyphicon glyphicon-tree-deciduous\"\n                                                           aria-hidden=\"true\"> </span>\n                                                    <span className={\"sentence-omit\"}>{suggestion}</span>\n                                                    {/*<span >({cluster.size})</span>*/}\n                                                </div>\n                                            })}</div>\n                                    </div>\n                                )}\n\n                            </div>\n                            {this.props.message.right_mode  &&\n                            <div className=\"card\" style={{width:\"60%\"}}>\n                                <div style={{\"display\":\"flow-root\"}}><i onClick={()=>this.onCloseRightCard()} style={{color:\"black\"}} className=\"right material-icons\">close</i></div>\n                                {this.props.message.right_mode ===\"iframe\"  &&\n                                <div className=\"iframe-content\" >\n                                    <Iframe\n                                        src={this.props.message.i_url}\n                                        className=\"full-width-height\"\n                                    />\n                                </div>\n                                }\n\n\n\n                            </div>\n                            }\n                        </div>\n                        }\n\n\n\n\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.GENERIC_MESSAGE:\n                msgDiv = (\n                    <div className=\"carousel-container \">\n                        {messageData.info_boxes && messageData.info_boxes.length >0 &&\n                        <div className=\"carousel-item\">\n                            <div className=\"card\" style={{display:\"table\",width:\"40%\"}}>\n                                <div className=\"summary\">\n                                    <div className=\"img-wrapper\">\n                                        <img style={{width:\"100px\"}} src={messageData.info_boxes[0].img_src?messageData.info_boxes[0].img_src:\"/images/logo-middle.png\"} />\n                                    </div>\n                                    <div className=\"content\">\n                                        {messageData.info_boxes[0].infobox && (\n                                            <div className=\"title wrap-word\">\n                                                {messageData.info_boxes[0].infobox}\n                                            </div>\n                                        )}\n\n                                        {messageData.info_boxes[0].content && (\n                                            <div className=\"text wrap-word\">\n                                                {messageData.info_boxes[0].content.substr(0, 200).split('\\n').map((line, index) => {\n                                                    return <div key={index}>{line}</div>;\n                                                })}\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n\n                                <div className=\"button-group\">\n                                    {messageData.info_boxes[0].urls &&\n                                    <a className=\"btn btn-block btn-primary\">\n                                        <div className=\"row \">\n                                            <span className={\"col s11\"}\n                                                  onClick={() => this.onViewIFrame(messageData.info_boxes[0].urls[0], messageData.info_boxes[0].infobox, this.props.m_index)}> VIEW IN {messageData.info_boxes[0].urls[0].title}</span>\n                                            <i style={{position: \"relative\", top: \"-5px\"}}\n                                               className=\"col s1 material-icons\"\n                                               onClick={() => this.onOpenNewWeb(messageData.info_boxes[0].urls[0].url)}>launch</i>\n                                        </div>\n                                    </a>\n                                    }\n                                    {messageData.suggestions &&\n                                    <a href=\"#\" className=\"btn btn-block btn-primary\" onClick={() => this.onFolderButtonClick(messageData.info_boxes[0].infobox, this.props.m_index)}>\n                                        <span>LEARN MORE</span>\n\n                                        <span className={this.state.learn_more_folder_css}>( Suggestions )</span>\n                                    </a>\n                                    }\n\n                                </div>\n\n                                {messageData.suggestions && this.props.message.drop_mode ==='suggestion' && (\n                                    <div className=\"folder-summary\" >\n                                        <div className=\"carrot-folder-list\">\n                                            {messageData.suggestions.map((suggestion, index)=>{\n                                                return <div className={\"valign-wrapper\"} style={{cursor: \"pointer\"}} key={index} onClick={()=>this.onOpenSearX(suggestion)}>\n                                                    <span  style={{color:\"#f9c44c\", marginRight:\"5px\"}} className=\"glyphicon glyphicon-tree-deciduous\"\n                                                           aria-hidden=\"true\"> </span>\n                                                    <span className={\"sentence-omit\"}>{suggestion}</span>\n                                                    {/*<span >({cluster.size})</span>*/}\n                                                </div>\n                                            })}</div>\n                                    </div>\n                                )}\n\n                            </div>\n                            {this.props.message.right_mode  &&\n                            <div className=\"card\" style={{width:\"60%\"}}>\n                                <div style={{\"display\":\"flow-root\"}}><i onClick={()=>this.onCloseRightCard()} style={{color:\"black\"}} className=\"right material-icons\">close</i></div>\n                                {this.props.message.right_mode ===\"iframe\"  &&\n                                <div className=\"iframe-content\" >\n                                    <Iframe\n                                        src={this.props.message.i_url}\n                                        className=\"full-width-height\"\n                                    />\n                                </div>\n                                }\n\n\n\n                            </div>\n                            }\n                        </div>\n                        }\n\n\n\n\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.WIKIQUOTE_MESSAGE:\n                msgDiv = (\n                    <div className={'bubble card'} style={{color: \"black\",border: \"2px solid #ffe2e2\", backgroundColor: \"#fff5f5\"}}>\n                        <div style={{\"background\": \"#ffe2e2\", paddingTop: \"0.1em\",paddingBottom: \"0.1em\", textAlign: \"center\"\n                            ,fontSize: \"larger\", width: \"100%\"}}><b>Quote of the day</b></div>\n                            <div >{messageData[0].text.split('~')[0]}</div>\n                            <div style={{fontStyle: \"italic\",textAlign: \"right\"}}>~{messageData[0].text.split('~')[1]}</div>\n\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.OPEN_SITE_MESSAGE:\n                msgDiv = (\n                    <div className=\"open-site-container\">\n                        <div className=\"card\" style={{display:\"table\", maxWidth:\"300px\", marginRight:\"10px\"}}>\n                            <div className=\"site-title\">\n                                {this.props.message.url}\n                            </div>\n\n                            <div className=\"button-group\">\n                                <a href={\"#\"} className=\"btn btn-block btn-primary\" >\n                                    <span onClick={()=>this.set_more(this.props.m_index)} >View More</span>\n                                    <i onClick={()=>this.onOpenNewWeb(\"//\" + this.props.message.url)} className=\"material-icons\">launch</i>\n                                </a>\n                            </div>\n                        </div>\n                        {this.props.message['right_mode'] === 'more' &&\n                        <div className={\"card\"}>\n                            <div style={{display: \"block\", textAlign: \"center\", height: \"40px\", padding: \"10px\"}}>\n                                <span style={{textAlign: \"center\", marginLeft: \"11%\"}}>\n                                    {this.props.message.url}\n                                </span><i\n                                onClick={() => this.onCloseRightCard()} style={{color: \"black\"}}\n                                className=\"right material-icons\">close</i></div>\n                            <div className=\"iframe-content\">\n                                <Iframe\n                                    src={\"//\" + this.props.message.url}\n                                    className=\"full-width-height\"\n                                />\n                            </div>\n\n                        </div>\n                        }\n\n                    </div>\n                )\n                break;\n            case Constants.response.ResponseType.CAROUSEL_MESSAGE:\n                msgDiv = (\n                    <div style={{display:\"flex\"}}>\n                        <div id={\"paginated_cards_\" + this.props.m_index} className=\"card cards\" style={{display:\"table\", marginRight:\"10px\"}}>\n                            <div className=\"cards_scroller\">\n                                {messageData.map((message, index) => {\n                                        return <div key={index} className=\"carousel_cards in-left\">\n                                            <img onClick={()=>this.onOpenNewWeb(message.img_src)} className=\"cardBackgroundImage\" src={message.img_src} />\n                                            <div className=\"cardFooter\">\n                                                <span className=\"cardTitle\" title={message.title}>\n                                                    {message.title}\n                                                </span>\n                                                <div className=\"cardDescription\">\n                                                    <div className=\"stars-outer\">\n                                                        <div className=\"stars-inner\" style={{width:Math.round((message.score  * 100) )+ \"%\"}}>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                        </div>\n                                    }\n                                )}\n                                <i onClick={()=>this.scrollToPrevPage()} className=\"arrow prev fa fa-chevron-circle-left \"> </i>\n                                <i onClick={()=>this.scrollToNextPage()} className=\"arrow next fa fa-chevron-circle-right\"> </i>\n                            </div>\n                            <div className=\"button-group\">\n                                <a href={\"#\"} className=\"btn btn-block btn-primary\" onClick={()=>this.set_more(this.props.m_index)} >\n                                    <span >View More</span>\n                                    <i className=\"material-icons\">launch</i>\n                                </a>\n                            </div>\n                        </div>\n                        {this.props.message['right_mode'] === 'more' &&\n                        <div id={\"paginated_cards_more_\" + this.props.m_index} className=\"card cards_more\">\n                            <div style={{display: \"block\", textAlign: \"center\", height: \"40px\", padding: \"10px\"}}>\n                                <span style={{textAlign: \"center\", marginLeft: \"11%\"}}>\n                                    {this.props.message['keyword']}\n                                </span><i\n                                onClick={() => this.onCloseRightCard()} style={{color: \"black\"}}\n                                className=\"right material-icons\">close</i></div>\n                            <div className=\"cards_scroller_more\">\n                                <i onClick={() => this.scrollToPrevMorePage()}\n                                   className=\"arrow prev fa fa-chevron-circle-left \"> </i>\n                                <i onClick={() => this.scrollToNextMorePage()}\n                                   className=\"arrow next fa fa-chevron-circle-right\"> </i>\n                                {this.props.arrays.map((list, index) => {\n                                        return <ul key={index} className=\"carousel_cards in-left\">\n                                            {list.map((image, index3) => {\n                                                return <li key={index3}>\n                                                    <div className={\"img-wrap\"}>\n                                                        <img onClick={()=>this.onOpenNewWeb(image.img_src)}  className=\"cardBackgroundImage_more\" src={image.img_src}/>\n                                                    </div>\n                                                </li>\n                                            })}\n                                        </ul>\n                                    }\n                                )}\n\n                            </div>\n                        </div>\n                        }\n\n                    </div>\n                )\n                break;\n            case Constants.response.ResponseType.WEATHER_MESSAGE:\n                msgDiv = (\n                    <div className=\"carousel-container\" >\n                        <div className=\"carousel-item\">\n                            <div className={\"card\"} style={{width:\"300px\"}}>\n                               {/* <ReactWeather\n                                    forecast=\"today\"\n                                    apikey={this.props.weather_api_key}\n                                    type=\"geo\"\n                                    lat=\"48.1351\"\n                                    lon=\"11.5820\"\n                                    unit={\"metric\"}\n                                />*/}\n                                {this.props.message.main_weather &&\n                                <div id={\"openweathermap-widget-\" + this.props.m_index}> </div>\n                                }\n                                <div className=\"button-group\">\n                                    <a href={\"#\"} className=\"btn btn-block btn-primary\" >\n                                        <span onClick={()=>this.props.onChangeTemperatureUnit(this.props.m_index)} className={\"left\"}>( F/C )</span>\n                                        <span onClick={()=>this.props.set_more_weather(this.props.m_index)} >View More</span>\n                                        <i onClick={()=>this.onOpenNewWeb('//www.weather.com')} className=\"material-icons\">launch</i>\n                                    </a>\n                                </div>\n\n                            </div>\n                            {this.props.message.more_weather &&\n                            <div className={\"card\"}\n                                 style={{maxWidth: \"680px\", overflow: \"hidden\"}}>\n                                <div id={\"openweathermap-widget-more-\" + this.props.m_index}>\n                                </div>\n                                <div className=\"button-group\">\n                                    <a href={\"#\"} onClick={() => this.props.clear_more_weather(this.props.m_index)} className=\"btn btn-block btn-primary\">\n                                        <i style={{color: \"black\"}} className=\"right material-icons\">close</i>\n                                    </a>\n                                </div>\n                            </div>\n                            }\n                        </div>\n\n                    </div>\n                )\n                break;\n\n            case Constants.response.ResponseType.IMAGE_MESSAGE:\n                msgDiv = (\n                    <div className=\"carousel-container slideLeft\">\n                        {messageData.map((message, index) => {\n                            return <div key={index} className=\"carousel-item\">\n                                <div className=\"card\">\n                                    <div className=\"summary\">\n                                        <div className=\"message-img-wrapper\">\n                                            <img style={{width:\"300px\"}} src={message.image} />\n                                        </div>\n\n                                    </div>\n\n                                </div>\n                            </div>\n\n                        })}\n                    </div>\n                );\n                break;\n            case Constants.request.RequestType.PARAMETER_MESSAGE:\n                msgDiv = (\n                    <div className={`bubble card pullUp ${fromBot}`}>\n                        {messageData[0].label || messageData[0].payload}\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.TEXT_MESSAGE:\n                msgDiv = (\n                    <div className={`bubble card pullUp ${fromBot}`}>\n                        {messageData[0].text.split('\\n').map((line, index) => {\n                            return <div key={index}>{line}</div>;\n                        })}\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.SMART_REPLY_MESSAGE:\n                var message = messageData[0];\n                msgDiv = (\n                    <div>\n                        <div className={`bubble card pullUp ${fromBot}`}>\n                            {message.text}\n                        </div>\n                        {message.smartReplies && (<div className={`smart-reply-container slideUp`}>\n                            {message.smartReplies.map((reply, index) => {\n                                return <a key={index} href=\"#\" className=\"smart-reply\" onClick={(event) => this.onParamButtonClick(event, reply.uri, reply.title)}>{reply.title}</a>\n                            })}\n                        </div>)}\n                    </div>\n                );\n                break;\n            case Constants.response.ResponseType.BUTTON_TEXT_MESSAGE:\n                var message = messageData[0];\n                msgDiv = (\n                    <div className={`bubble card pullUp ${fromBot}`}>\n                        {message.text.split('\\n').map((line, index) => {\n                            return <div key={index}>{line}</div>;\n                        })}\n\n                        { message.buttons.length > 0 && (\n                            <div className=\"button-group\">\n                                {message.buttons.map((button, index) => {\n                                        switch(button.buttonType) {\n                                            case Constants.response.ResponseType.BUTTON_LINK:\n                                                return <a key={index} href={button.uri} target=\"_blank\" className=\"btn btn-block btn-raised btn-info\">\n                                                    {button.title}\n                                                    <i className=\"material-icons\">launch</i>\n                                                </a>\n                                            case Constants.response.ResponseType.BUTTON_PARAM:\n                                                return <a key={index} href=\"#\" data-param={button.uri} onClick={(event) => this.onParamButtonClick(event, button.uri, button.title)} className=\"btn btn-block btn-raised btn-info\">{button.title}</a>\n                                        }\n                                    }\n                                )}\n                            </div>\n                        )}\n                    </div>\n                );\n                break;\n            case 'carousel': // Added for Backwards Compatibility can be removed later if we don't have lot of history for carousel\n            case Constants.response.ResponseType.LOADING_MESSAGE:\n                msgDiv = (\n                    <div className={`bubble card pullUp ${fromBot}`}>\n                        <div className=\"loading-dot dot-1\"></div>\n                        <div className=\"loading-dot dot-2\"></div>\n                        <div className=\"loading-dot dot-3\"></div>\n                    </div>\n                );\n                break;\n        }\n\n        return(\n            <div className=\"container-fluid\">\n                {this.renderBotDiv()}\n                {msgDiv}\n            </div>\n        );\n    }\n}\n\nMessage.defaultProps = {\n    message: [], // {messageType: string, messageData: object}\n    fromBot: false,\n    m_index:0,\n\n};\n\n\nconst mapStateToProps = (user)=> (user);\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        // CarrotAPIAction:data => CarrotAPIAction(dispatch,data),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Message);","import _ from \"lodash\";\nimport React from 'react';\nimport Message from './Message';\nimport * as Constants from '../../Constants';\nimport $ from 'jquery';\n\nimport connect from 'react-redux/es/connect/connect'\n\n\nclass Messages extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state={\n            weather_unit:'imperial',\n\n        }\n        this.messageLength = 0;\n    }\n    componentDidMount() {\n\n    }\n\n\n    scrollToMessage() {\n        const element = document.getElementById(\"messages-container\");\n        if(!this.props.isAdmin) {\n            var target = $('.bubble-user').last().parent();\n            if(target.length) {\n                $(element).animate({\n                    scrollTop: target.offset().top - $(element).offset().top + $(element).scrollTop()\n                });\n            }\n        }\n    }\n    onChangeTemperatureUnit = (m_index) =>{\n        let weather_unit = this.state.weather_unit;\n        if(weather_unit === 'metric'){\n            weather_unit = 'imperial'\n        } else {\n            weather_unit = 'metric'\n        }\n\n\n        this.setState({weather_unit:weather_unit});\n        this.clear_main_weather(m_index)\n        let more = this.props.messages[m_index]['message']['more_weather'];\n        if(more){\n            this.clear_more_weather(m_index)\n        }\n\n        const vm = this;\n        let myFunc = function () {\n            vm.set_main_weather(m_index);\n            if(more){\n                vm.set_more_weather(m_index);\n            }\n\n        }\n        setTimeout(myFunc,500)\n\n\n\n    }\n    clear_main_weather = (m_index) => {\n        let messages = this.props.messages;\n\n\n        messages[m_index]['message']['main_weather'] = false;\n        let myWidgetParam = this.props.myWidgetParam;\n\n        _.remove(myWidgetParam, { containerid:'openweathermap-widget-' + m_index });\n        this.props.ChangeStateFunc(myWidgetParam, messages)\n\n    }\n    set_main_weather = (m_index)=>{\n        let messages = this.props.messages;\n\n\n        messages[m_index]['message']['main_weather'] = true;\n\n        let myWidgetParam = this.props.myWidgetParam;\n\n        _.remove(myWidgetParam, { id: 15, containerid:'openweathermap-widget-' + m_index});\n        let op_15 = _.filter(myWidgetParam, { containerid:'openweathermap-widget-' + m_index });\n        if(op_15.length < 1)\n            myWidgetParam.push({id: 15,cityid: messages[m_index].message.messageData[0]['weather_city_id'],\n                appid: this.props.weather_api_key,units: this.state.weather_unit,\n                containerid: 'openweathermap-widget-' + m_index,  });\n\n        this.props.ChangeStateFunc(myWidgetParam, messages)\n\n    }\n\n    clear_more_weather = (m_index) => {\n        let messages = this.props.messages;\n\n        messages[m_index]['message']['more_weather'] = false;\n\n        let myWidgetParam = this.props.myWidgetParam;\n\n        _.remove(myWidgetParam, { containerid:'openweathermap-widget-more-' + m_index });\n        this.props.ChangeStateFunc(myWidgetParam, messages)\n\n    }\n    set_more_weather = (m_index)=>{\n        let messages = this.props.messages;\n\n        messages[m_index]['message']['more_weather'] = true;\n\n\n        let myWidgetParam = this.props.myWidgetParam;\n\n        _.remove(myWidgetParam, { id: 11, containerid:'openweathermap-widget-more-' + m_index});\n        let op_11 = _.filter(myWidgetParam, { containerid:'openweathermap-widget-more-' + m_index });\n        if(op_11.length < 1)\n            myWidgetParam.push({id: 11,cityid: messages[m_index].message.messageData[0]['weather_city_id'],\n                appid: this.props.weather_api_key,units: this.state.weather_unit,\n                containerid: 'openweathermap-widget-more-' + m_index,  });\n\n        this.props.ChangeStateFunc(myWidgetParam, messages)\n\n    }\n    render() {\n        const messages = this.props.messages.map((message, i) => {\n\n            let arrays = [];\n            if(message.message.messageType === Constants.response.ResponseType.CAROUSEL_MESSAGE){\n\n                let images = [...message.message.messageData];\n                while (images.length > 0)\n                    arrays.push(images.splice(0, 4));\n            }\n\n\n            return (\n                <Message\n                    weather_api_key={this.props.weather_api_key}\n                    onChangeTemperatureUnit={this.onChangeTemperatureUnit}\n                    set_more_weather={this.set_more_weather}\n                    clear_more_weather={this.clear_more_weather}\n                    weather_unit={this.state.weather_unit}\n                    key={i}\n                    m_index={i}\n                    arrays={arrays}\n                    myWidgetParam={this.props.myWidgetParam}\n                    isAdmin={this.props.isAdmin}\n                    message={message.message}\n                    fromBot={message.fromBot}\n                    onSend={this.props.onSend} />\n            );\n        });\n\n        if(this.messageLength < messages.length) {\n            this.scrollToMessage();\n            this.messageLength = messages.length;\n        }\n\n        return (\n            <div id=\"messages-container\">\n                {messages}\n                {this.props.loading && <Message\n                    message={{messageType: Constants.response.ResponseType.LOADING_MESSAGE}}\n                    fromBot={true} /> }\n            </div>\n        );\n    }\n}\n\nMessages.defaultProps = {\n    messages: [],\n    loading: false\n};\n\n\nconst mapStateToProps = (user)=> (user);\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages);\n","import React from 'react';\nimport * as Constants from '../../Constants';\nimport '../../../lib/vad';\nimport store from \"../../../redux/store\";\nimport {EMPTY_TYPE} from \"../../../redux/actions/userAction\";\n\nclass ChatInput extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.inputMargin = 60;\n        this.audioContext = undefined;\n        this.mediaRecorder= {};\n        // this.isRecording = false;\n\n        this.analyser = undefined;\n        this.canvas= undefined;\n        this.ctx= undefined;\n        this.canvasHeight= undefined;\n        this.canvasWidth= undefined;\n        this.countFrame= 0;\n        this.recordTime= undefined;\n        this.state = {\n            chatInput: '',\n            showSendButton: false,\n            sendDisabled: true,\n            inputMargin: this.inputMargin,\n            isFlyoutOpen: false,\n            isRecording:false,\n\n\n        };\n\n        this.submitHandler = this.submitHandler.bind(this);\n        this.textChangeHandler = this.textChangeHandler.bind(this);\n        this.inputFocus = this.inputFocus.bind(this);\n        this.inputBlur = this.inputBlur.bind(this);\n        this.toggleFlyout = this.toggleFlyout.bind(this);\n        this.onFlyoutOptionClick = this.onFlyoutOptionClick.bind(this);\n    }\n    componentDidMount() {\n\n    }\n\n\n    startRecord = () =>{\n        let loading = this.props.loading;\n        if(loading){\n            return;\n        }\n        if(this.state.isRecording){\n            this.stopRecording()\n            return;\n        }\n        window.AudioContext = window.AudioContext || window.webkitAudioContext;\n        // this.audioContext = new AudioContext();\n        this.audioContext = new AudioContext({ sampleRate: 16000 });\n        this.setState({isRecording :true});\n        // Ask for audio device\n\n        navigator.getUserMedia = (\n            navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.msGetUserMedia\n        );\n\n        if (typeof navigator.mediaDevices.getUserMedia === 'undefined') {\n            navigator.getUserMedia({\n                audio: true\n            }, this.startUserMedia, e => {\n                console.log(`No live audio input in this browser: ${e}`);\n            });\n        } else {\n            navigator.mediaDevices.getUserMedia({\n                audio: true\n            }).then(this.startUserMedia).catch(e => {\n                console.log(`No live audio input in this browser: ${e}`);\n            });\n        }\n\n    }\n    stopRecording = () => {\n        if (this.state.isRecording) {\n            this.mediaRecorder.stop();\n            this.set_stopRecording();\n            this.mediaRecorder.exportWAV(this.createFileLink);\n            console.log('voice_stop');\n        }\n\n    }\n    set_stopRecording = () =>{\n        this.audioContext.close().then(() => {\n            console.log('streaming close');\n\n        });\n        this.setState({isRecording :false});\n\n    }\n    startUserMedia = (stream) => {\n        const vm = this;\n        vm.analyser = vm.audioContext.createAnalyser();\n        const source = vm.audioContext.createMediaStreamSource(stream).connect(vm.analyser);\n        console.log(vm.analyser);\n\n        // eslint-disable-next-line no-undef\n        vm.mediaRecorder = new Recorder(source, { numChannels: 1 });\n        vm.mediaRecorder.record();\n\n        window.setTimeout(() => {\n            if (vm.state.isRecording) {\n                vm.mediaRecorder.stop();\n                vm.set_stopRecording();\n                vm.mediaRecorder.exportWAV(vm.createFileLink);\n                console.log('10 seconds, stop recording');\n            }\n        }, 10000);\n\n        const options = {\n            source: source,\n            voice_stop: function() {\n                /*         This line using Mediarecorder            */\n\n                if (vm.state.isRecording) {\n                    vm.mediaRecorder.stop();\n                    vm.set_stopRecording();\n                    vm.mediaRecorder.exportWAV(vm.createFileLink);\n                    console.log('voice_stop');\n                }\n            },\n            voice_start: function() {\n                if (vm.state.isRecording) {\n                    console.log('voice_start');\n                    // } else if (!vm.isRecording && (this.incomeMessage.length === 0)) {\n                    // \tconsole.log('StartRecording');\n                    // \tvm.startRecord();\n                }\n            }\n        };\n        // Create VAD\n        // eslint-disable-next-line no-undef\n        const vad = new VAD(options);\n\n    }\n    createFileLink =(blob) => {\n        const vm = this;\n        console.log('recorder stopped');\n\n        this.waitForRespose = true;\n        const audioURL = window.URL.createObjectURL(blob);\n\n        const request = new XMLHttpRequest();\n        request.open('GET', audioURL, true);\n        request.responseType = 'blob';\n        request.onload = function() {\n            const reader = new FileReader();\n            reader.readAsDataURL(request.response);\n            reader.onload = function(el) {\n                // console.log('DataURL:', el.target.result);\n                console.log('SEND RESULT TO THE BOT');\n                // vm.playMedia(audioURL);\n                vm.sendMessageToBot(el.target.result);\n\n\n            };\n        };\n        request.send();\n    }\n    playMedia = (audioPath) => {\n        const audio = document.querySelector('.sound-clips');\n        audio.setAttribute('controls', '');\n        audio.setAttribute('autoplay', '');\n        audio.src = audioPath;\n    }\n    sendMessageToBot = (text) =>{\n        store.dispatch({\n            type:EMPTY_TYPE,\n            loading:true,\n        });\n        if (text && text.length >= 1 && text.indexOf('data:audio/wav') !== -1) {\n\n            console.log('type: voice');\n\n            this.props.socket.emit('user_uttered', { type:'voice', message: text, room: this.props.userId });\n        } else {\n            console.log('type: chat');\n\n            this.socket.emit('user_uttered', { type:'chat', message: text, room: this.props.userId });\n        }\n    }\n\n\n    //////////////\n\n\n\n    submitHandler(event) {\n        event.preventDefault();\n        if(this.state.chatInput !== '') {\n            this.setState({chatInput: '', sendDisabled: true});\n            if(this.props.coordinate_lat && this.props.coordinate_long){\n                this.props.onSend({\n                    messageType: Constants.request.RequestType.TEXT_MESSAGE,\n                    messageData: [{text: this.state.chatInput}],\n                    message: this.state.chatInput,\n                    location:{lat:this.props.coordinate_lat, long:this.props.coordinate_long}\n                }, this.state.chatInput);\n\n            } else {\n                this.props.onSend({\n                    messageType: Constants.request.RequestType.TEXT_MESSAGE,\n                    messageData: [{text: this.state.chatInput}],\n                    message: this.state.chatInput,\n                }, this.state.chatInput);\n            }\n\n        }\n    }\n\n    toggleOverlay(isFlyoutOpen) {\n        if (isFlyoutOpen) {\n            this.props.showOverlay();\n        }\n        else {\n            this.props.hideOverlay();\n        }\n    }\n\n    toggleFlyout() {\n        let isFlyoutOpen = !this.state.isFlyoutOpen;\n        this.setState({isFlyoutOpen: isFlyoutOpen});\n        this.toggleOverlay(isFlyoutOpen);\n    }\n\n    inputFocus() {\n        this.setState({inputMargin: 0, isFlyoutOpen: false, showSendButton: true});\n    }\n\n    inputBlur() {\n        let showSendButton = this.state.chatInput.length > 0;\n        let inputMargin = showSendButton ? 0 : this.inputMargin;\n        // Do not hide send button if user has typed something\n        this.setState({inputMargin: inputMargin, showSendButton: showSendButton});\n    }\n\n    textChangeHandler(event) {\n        let value = event.target.value;\n        this.setState({chatInput: value, sendDisabled: value === ''});\n    }\n    onControlMic = () =>{\n        this.props.createSocket();\n        this.setState({isFlyoutOpen: false});\n        this.toggleOverlay(false);\n    }\n    onFlyoutOptionClick(event, type) {\n        this.setState({isFlyoutOpen: false});\n        switch(type) {\n            case 'feedback':\n                this.props.showFeedback();\n                break;\n            case 'about':\n                this.props.showAbout();\n                break;\n            case 'start':\n                this.props.showStart(true);\n                break;\n            default :\n                this.props.showStart(true);\n                break;\n        }\n        this.toggleOverlay(false);\n    }\n    onSetSound = () =>{\n        if(this.props.isSound){\n            store.dispatch({\n                type:EMPTY_TYPE,\n                isSound:false,\n            })\n        } else {\n            store.dispatch({\n                type:EMPTY_TYPE,\n                isSound:true,\n            })\n        }\n\n    }\n\n    render() {\n        let sendButtonClass = 'btn btn-fab btn-raised send-button' + (this.state.sendDisabled ? ' disabled' : '');\n        let moreButtonClass = 'btn btn-fab btn-raised more-button';\n        let moreButtonOptionClass = 'btn btn-raised btn-fab btn-fab-mini';\n        let flyoutClass = 'more-button-container' + (this.state.isFlyoutOpen ? ' active' : '');\n\n        if (this.props.isAdmin) {\n            return (<div></div>)\n        }\n        else {\n            return (<form onSubmit={this.submitHandler} id=\"chat-input-container\">\n                    <fieldset>\n                        <div className=\"form-group\">\n                            {this.state.inputMargin > 0 && (\n                                <div className={flyoutClass}>\n                                    <a onClick={(event) => this.onFlyoutOptionClick(event, 'start')} className=\"button\">\n                                        <div className={`${moreButtonOptionClass} btn-info`}>\n                                            <img src=\"/images/icon-restart-32.png\" />\n                                        </div>\n                                        <span>Start Over</span>\n                                    </a>\n\n                                    <a onClick={(event) => this.onFlyoutOptionClick(event, 'feedback')} className=\"button\">\n                                        <div className={`${moreButtonOptionClass} btn-danger`}>\n                                            <img src=\"/images/icon-feedback-32.png\" />\n                                        </div>\n                                        <span>Feedback</span>\n                                    </a>\n                                    <a onClick={(event) => this.onFlyoutOptionClick(event, 'about')} className=\"button\">\n                                        <div className={`${moreButtonOptionClass} btn-success`}>\n                                            <img src=\"/images/icon-about-32.png\" />\n                                        </div>\n                                        <span>About</span>\n                                    </a>\n                                    <a className={moreButtonClass} onClick={this.toggleFlyout}>\n                                        {!this.state.isFlyoutOpen &&\n                                        <span className=\"glyphicon glyphicon-arrow-right\" style={{color: \"white\",fontSize: \"29px\",top: \"12px\"}} aria-hidden=\"true\"> </span>\n                                        }\n                                        {this.state.isFlyoutOpen &&\n                                        <span className=\"glyphicon glyphicon-arrow-up\" style={{color: \"white\",fontSize: \"29px\",top: \"12px\"}} aria-hidden=\"true\"> </span>\n                                        }\n\n                                    </a>\n                                </div>\n                            )}\n\n\n                            <input type=\"text\"\n                                   className=\"form-control\"\n                                   id=\"chat-input\"\n                                   onChange={this.textChangeHandler}\n                                   value={this.state.chatInput}\n                                   placeholder=\"Enter Query Here\"\n                                   autoComplete=\"off\"\n                                   style={{marginLeft: this.state.inputMargin}}\n                                   onFocus={this.inputFocus}\n                                   onBlur={this.inputBlur}\n                            />\n\n                            {this.state.showSendButton && (\n                                <a href=\"#\" onClick={this.submitHandler} className={sendButtonClass}>\n                                    <img src=\"/images/icon-send-32.png\" />\n                                </a>\n                            )}\n\n\n                            <div className=\"btn btn-fab btn-raised more-button\"  onClick={() => this.onSetSound()}>\n\n                                {this.props.isSound &&\n\n                                <i className=\" material-icons\" style={{\n                                    left: \"25px\",\n                                    fontSize: \"30px\",\n                                    color: 'green'\n                                }}>volume_down</i>\n                                }\n                                {!this.props.isSound &&\n\n                                <i className=\" material-icons\" style={{\n                                    left: \"25px\",\n                                    fontSize: \"30px\",\n                                    color: 'black'\n                                }}>volume_off</i>\n                                }\n\n                            </div>\n\n\n                            <audio className=\"sound-clips\" style={{display:\"none\"}}> </audio>\n                        </div>\n                    </fieldset>\n\n                </form>\n            );\n        }\n    }\n}\n\nChatInput.defaultProps = {\n\n};\n\nexport default ChatInput;","import React from 'react';\nimport Modal from 'react-modal';\nimport $ from 'jquery';\nclass Feedback extends React.Component {\n    getUrlParam(name) {\n        return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + encodeURIComponent(name).replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {submitDisabled: true, title: '', description: ''};\n\n        if(this.props.userId == null) {\n            this.userId = this.getUrlParam(\"userId\");\n        }\n        else {\n            this.userId = this.props.userId;\n        }\n\n        this.titleChangeHandler = this.titleChangeHandler.bind(this);\n        this.descriptionChangeHandler = this.descriptionChangeHandler.bind(this);\n        this.onCloseClick = this.onCloseClick.bind(this);\n        this.onSubmitClick = this.onSubmitClick.bind(this);\n    }\n\n    setSubmitState() {\n        this.setState({submitDisabled: this.state.title.length < 5 || this.state.description.length < 20});\n    }\n\n    titleChangeHandler(event) {\n        this.setState({title: event.target.value});\n        this.setSubmitState();\n    }\n\n    descriptionChangeHandler(event) {\n        this.setState({description: event.target.value});\n        this.setSubmitState();\n    }\n\n    onCloseClick(event) {\n        event.preventDefault();\n        if(this.props.hide) {\n            this.props.hide();\n        }\n    }\n\n    onSubmitClick(event) {\n        event.preventDefault();\n        if(this.state.submitDisabled) {\n            $.snackbar({content: 'Please provide more information'});\n        }\n        else {\n            var submit_snackbar = $.snackbar({content: 'Submitting...', timeout: 2000});\n            $.ajax({\n                type: 'POST',\n                url: '/feedback',\n                headers: {\n                    'Accept': 'application/json; charset=utf-8',\n                    'Content-Type': 'application/json; charset=utf-8'\n                },\n                dataType: 'text',\n                data: JSON.stringify({title: this.state.title, description: this.state.description, userId: this.userId}),\n                success: (response) => {\n                    this.setState({title: '', description: ''});\n                    submit_snackbar.snackbar('hide');\n                    $.snackbar({content: 'Feedback Submitted Successfully', timeout: 5000});\n                },\n                error: () => {\n                    submit_snackbar.snackbar('hide');\n                    $.snackbar({content: 'Error! Feedback could not be submitted. Please try again.', timeout: 5000});\n                }\n            });\n            this.props.hide();\n        }\n    }\n\n    render() {\n        let submitClass = \"btn btn-raised btn-primary\" + (this.state.submitDisabled ? ' disabled' : '');\n        return (\n            <div>\n                <Modal\n                    isOpen={this.props.isOpen}\n                    contentLabel=\"Feedback Modal\"\n                    style={{content: {border: 'none', background: 'none', top: 20, left: 20, right: 20, bottom: 20}}}>\n\n                    <div className=\"card feedback-container slideDown\">\n                        <form>\n                            <fieldset>\n                                <legend>Feedback</legend>\n                                <div className=\"form-group\">\n                                    <input type=\"text\"\n                                        value={this.state.title}\n                                        onChange={this.titleChangeHandler}\n                                        className=\"form-control\"\n                                        placeholder=\"Provide a short title (min 5 chars)\" />\n                                </div>\n                                <div className=\"form-group\">\n                                    <textarea\n                                        value={this.state.description}\n                                        className=\"form-control\"\n                                        onChange={this.descriptionChangeHandler}\n                                        placeholder=\"Please describe the issue or help us by suggesting a feature (min 20 chars)\"\n                                        rows=\"3\" />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <button onClick={this.onSubmitClick} className={submitClass}>Submit</button>\n                                    {this.props.hide && (<button onClick={this.onCloseClick} className=\"btn btn-raised btn-danger\">Cancel</button>)}\n                                </div>\n                            </fieldset>\n                        </form>\n                    </div>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nFeedback.defaultProps = {\n    userId: null\n};\nexport default Feedback;","import React from 'react';\nimport Modal from 'react-modal';\n\nclass About extends React.Component {\n    componentDidMount() {\n        // const main = document.getElementById('main');\n        Modal.setAppElement(this.mm)\n    }\n\n    getUrlParam(name) {\n        return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + encodeURIComponent(name).replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.onCloseClick = this.onCloseClick.bind(this);\n    }\n\n    onCloseClick(event) {\n        event.preventDefault();\n        if(this.props.hide) {\n            this.props.hide();\n        }\n    }\n\n    render() {\n        return (\n            <div ref={mm=>this.mm = mm}>\n                <Modal\n                    isOpen={this.props.isOpen}\n                    contentLabel=\"About Modal\"\n                    style={{content: {border: 'none', background: 'none', top: 20, left: 20, right: 20, bottom: 20, zIndex: 10}}}>\n\n                    <div className=\"card feedback-container slideDown\">\n                        <form>\n                            <fieldset>\n                                <legend>Scarlet</legend>\n                                The Next Generation (IPASE)\n                                Internet Personal Assistance Search Engine\n\n                                <h5>Privacy Policy</h5>\n                                <ul>\n                                    <li>Leader : Lonnie Cumberland, PhD</li>\n                                    <li>Contact : Lonnie@outstep.com</li>\n                                </ul>\n\n                                <h5>External APIs</h5>\n                                <ol>\n                                    <li>SearX API</li>\n                                    <li>Zomato API</li>\n\n                                </ol>\n\n                                <h5>General Libraries</h5>\n                                <ol>\n                                    <li>Rasa</li>\n                                    <li>SocketIO</li>\n                                    <li>WebRTC</li>\n                                </ol>\n\n                                <h5>Front Libraries/Frameworks</h5>\n                                <ol>\n                                    <li>React.js</li>\n                                    <li>Twitter Bootstrap</li>\n                                    <li>Bootstrap Material Design</li>\n                                    <li>LESS</li>\n                                </ol>\n                                <h5>Backend Libraries/Frameworks</h5>\n                                <ol>\n                                    <li>SearX</li>\n                                    <li>Docker</li>\n                                    <li>NodeJS</li>\n                                </ol>\n\n                                <div className=\"form-group\">\n                                    <button onClick={this.onCloseClick} className=\"btn btn-raised btn-primary\">Close</button>\n                                </div>\n                            </fieldset>\n\n                        </form>\n                    </div>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nAbout.defaultProps = {\n\n};\nexport default About;","\nimport React from 'react';\nimport $ from 'jquery';\nimport Messages from './Messages';\nimport ChatInput from './ChatInput';\nimport * as Constants from '../../Constants';\nimport Feedback from './Feedback';\nimport About from './About';\n\nimport {EMPTY_TYPE, WebHookAction} from '../../../redux/actions/userAction'\nimport connect from 'react-redux/es/connect/connect'\nimport socketIOClient from \"socket.io-client\";\nconst store = require( '../../../redux/store');\n\n\nclass ChatApp extends React.Component {\n\n    constructor(props) {\n        super();\n        this.state = {\n            myWidgetParam: [],\n            loading: false, showFeedback: false, overlay: false, showAbout: false, i_url: null\n        };\n        this.uuid = this.getUuid();\n        this.sendHandler = this.sendHandler.bind(this);\n        this.showStart = this.showStart.bind(this);\n        this.showFeedbackModal = this.showFeedbackModal.bind(this);\n        this.hideFeedbackModal = this.hideFeedbackModal.bind(this);\n        this.showAboutModal = this.showAboutModal.bind(this);\n        this.hideAboutModal = this.hideAboutModal.bind(this);\n        this.showOverlay = this.showOverlay.bind(this);\n        this.hideOverlay = this.hideOverlay.bind(this);\n\n    }\n\n    componentDidMount() {\n        if (!window.myWidgetParam) {\n            window.myWidgetParam = [];\n        }\n        var s = document.getElementsByTagName('script')[0];\n        var script1 = document.createElement('script');\n        script1.src = '//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'\n        s.parentNode.insertBefore(script1, s);\n\n\n        if (!this.props.isAdmin) {\n            setTimeout(() => {\n                this.showStart();\n            }, 500);\n        }\n\n        // this.createSocket();\n        // this.getLocation();\n\n    }\n    getLocation = () =>{\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.getUserPosition, this.handleLocationAccessError);\n        } else {\n            console.log(\"Geolocation is not supported by this browser.\");\n        }\n    }\n\n    getUserPosition = (position) => {\n        let coordinate = \"Latitude: \" + position.coords.latitude + \" Longitude: \" + position.coords.longitude;\n        console.log(\"location: \", coordinate);\n        store.default.dispatch({\n            type:EMPTY_TYPE,\n            coordinate_lat:position.coords.latitude,\n            coordinate_long:position.coords.longitude,\n        });\n\n        let message = '/my_location{\"latitude\":' + position.coords.latitude + ',\"longitude\":' + position.coords.longitude + '}';\n        let data = {\n            message:message\n        }\n        this.makeRequest(data);\n\n    }\n\n    handleLocationAccessError = (error) => {\n\n        switch (error.code) {\n            case error.PERMISSION_DENIED:\n                console.log(\"User denied the request for Geolocation.\")\n                break;\n            case error.POSITION_UNAVAILABLE:\n                console.log(\"Location information is unavailable.\")\n                break;\n            case error.TIMEOUT:\n                console.log(\"The request to get user location timed out.\")\n                break;\n            case error.UNKNOWN_ERROR:\n                console.log(\"An unknown error occurred.\")\n                break;\n        }\n    }\n    ChangeStateFunc = (myWidgetParam, messages=null) =>{\n        this.setState({myWidgetParam:myWidgetParam});\n        if(messages){\n            store.default.dispatch({\n                type:EMPTY_TYPE,\n                messages:messages,\n            })\n        }\n    }\n\n\n    // createSocket = () => {\n    //     if(this.props.user.socket){\n    //         this.props.user.socket.emit('disconnect');\n    //         store.default.dispatch({\n    //             type: EMPTY_TYPE,\n    //             userId: '',\n    //             socket: null\n    //         })\n    //         return;\n    //     }\n    //     const socket = socketIOClient(this.props.user.baseUrl+\":5005\");\n    //     let userId = this.generateUuid();\n    //     socket.on(\"connect\", () => {\n    //\n    //         socket.emit('session_request', {session_id: userId})\n    //         store.default.dispatch({\n    //             type: EMPTY_TYPE,\n    //             userId: userId,\n    //             socket: socket,\n    //             loading:false\n    //         })\n    //     });\n    //     socket.on(\"disconnect\", data => {\n    //         store.default.dispatch({\n    //             type: EMPTY_TYPE,\n    //             userId: '',\n    //             socket: null\n    //         })\n    //         console.log(data)\n    //     });\n    //     socket.on('session_confirm', data => {\n    //         console.log(data);\n    //         if (data === userId) {\n    //             console.log('session confirm success!')\n    //         }\n    //     })\n    //     socket.on('bot_uttered', data => {\n    //         console.log('bot_uttered', data);\n    //         this.getIncomingMessage(data);\n    //     })\n    // }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        if (this.props.user.bot_messages !== prevProps.user.bot_messages && !this.props.user.loading) {\n            if(this.props.user.sound_link){\n                const audio = document.getElementById('response-voice');\n                console.log(audio);\n                this.audio_play(this.props.user.sound_link).then(function() {\n                    audio.src = null;\n                });\n                // audio.src = this.props.user.sound_link;\n                // const playPromise = audio.play();\n                // if (playPromise !== null) {\n                //     playPromise.catch(() => {\n                //         audio.play();\n                //     });\n                // }\n            }\n\n            this.renderMessages(this.props.user.bot_messages)\n        }\n        if (this.props.user.messages !== prevProps.user.messages) {\n            this.setState({messages: this.props.user.messages})\n        }\n        if (this.props.user.myWidgetParam !== prevProps.user.myWidgetParam) {\n            this.setState({myWidgetParam: this.props.user.myWidgetParam})\n        }\n    }\n    audio_play = (url) => {\n        return new Promise(function(resolve, reject) { // return a promise\n            const audio = document.getElementById('response-voice');\n            audio.preload = \"auto\";                      // intend to play through\n            audio.autoplay = true;                       // autoplay when loaded\n            audio.onerror = reject;                      // on error, reject\n            audio.onended = resolve;                     // when done, resolve\n\n            audio.src = url\n        });\n    }\n    getIncomingMessage = (data) => {\n\n        if (data.link) {\n            if(data.text){\n                let bot_messages =[];\n                bot_messages.push(\n                    {'text':data.text});\n                store.default.dispatch({\n                    bot_messages,\n                    type: 'BOT_HOOK_SUCCESS',\n                    loading:false,\n                })\n            }\n            const audio = document.getElementById('response-voice');\n            console.log(audio);\n            audio.src = data.link;\n            const playPromise = audio.play();\n            if (playPromise !== null) {\n                playPromise.catch(() => {\n                    audio.play();\n                });\n            }\n\n        } else {\n\n            if(data.text){\n                let bot_messages =[];\n                bot_messages.push({'text':data.text});\n                store.default.dispatch({\n                    bot_messages,\n                    type: 'BOT_HOOK_SUCCESS',\n                    loading:false,\n\n\n                })\n            }\n            if(data.object){\n                const response_obj = JSON.parse(data.object);\n                let bot_messages =[];\n                if(response_obj['payload'] ==='generalSearch'){\n                    let messageData = response_obj['data'];\n                    bot_messages.push(\n                        {\n                            'messageType':'generalSearch',\n                            'messageData':messageData\n                        }\n                    );\n                }\n                if(response_obj['payload'] ==='findSearch'){\n                    let messageData = response_obj['data'];\n                    bot_messages.push(\n                        {\n                            'messageType':'findSearch',\n                            'messageData':messageData,\n                            'drop_mode':'suggestion',\n                            'right_mode':'iframe',\n                            'i_url':\"https://metasearch.outstep.com/?categories=general&language=en-US&q=\" + encodeURI(messageData['suggestions'][0]),\n                        }\n                    );\n                }\n                if(response_obj['payload'] ==='wikiquote'){\n                    let qotd = response_obj['text'];\n\n                    let messageData = [{'text':qotd}];\n                    bot_messages.push(\n                        {\n                            'messageType':'wikiquote',\n                            'messageData':messageData\n                        }\n                    );\n                }\n                if(response_obj['payload'] ==='open_site'){\n\n                    let messageData = [];\n                    bot_messages.push(\n                        {\n                            'right_mode': 'more',\n                            'messageType': 'open_site',\n                            'messageData': messageData,\n                            'url': response_obj['url'],\n                        });\n\n                }\n\n                if(response_obj['payload'] ==='cardsCarousel'){\n                    let messageData = response_obj['data'];\n                    bot_messages.push(\n                        {\n                            'messageType': 'cardsCarousel',\n                            'messageData': messageData,\n                            'keyword': response_obj['keyword'],\n                        });\n\n                }\n\n                if(response_obj['payload'] ==='weather'){\n                    const weather_city_name = response_obj['weather_city_name']\n                    const weather_city_id = response_obj['weather_city_id']\n\n                    let messageType = 'weather';\n                    let messageData_item = {};\n                    messageData_item['weather_city_id'] = weather_city_id;\n\n                    bot_messages.push(\n                        {\n                            'main_weather':true,\n                            'more_weather':false,\n                            'messageType': messageType,\n                            'messageData': [messageData_item],\n                        });\n\n\n                }\n                store.default.dispatch({\n                    bot_messages,\n                    type: 'BOT_HOOK_SUCCESS',\n                    loading:false,\n\n\n                })\n\n\n\n            }\n\n        }\n    }\n\n\n\n    scrollToMessage() {\n        const element = document.getElementById(\"messages-container\");\n        if(!this.props.isAdmin) {\n            var target = $('.bubble-user').last().parent();\n            if(target.length) {\n                $(element).animate({\n                    scrollTop: target.offset().top - $(element).offset().top + $(element).scrollTop()\n                });\n            }\n        }\n    }\n\n    generateUuid() {\n        var d = new Date().getTime();\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = (d + Math.random()*16)%16 | 0;\n            d = Math.floor(d/16);\n            return (c==='x' ? r : (r&0x3 || 0x8)).toString(16);\n        });\n\n    }\n\n    getUuid() {\n        if (localStorage) {\n            var uuid = localStorage.getItem('uuid');\n            if (uuid) {\n                return uuid;\n            }\n\n            uuid = this.generateUuid();\n            localStorage.setItem('uuid', uuid);\n            return uuid;\n        }\n        return this.generateUuid();\n    }\n\n    makeRequest(data) {\n        data.userId = this.uuid;\n        data.isSound = this.props.user.isSound;\n        console.log('makeRequest')\n        this.props.WebHookAction(data)\n\n    }\n\n    renderMessages(messages) {\n        for (let index in messages) {\n            setTimeout(() => {\n                let msg = {};\n                if(messages[index].messageType){\n                    msg = messages[index]\n                }else{\n                    msg.messageData=[messages[index]];\n                    if(messages[index].hasOwnProperty('text')){\n\n                        msg.messageType=msg.messageType?msg.messageType:'text';\n                    }\n                    if(messages[index].hasOwnProperty('image')){\n\n                        msg.messageType=msg.messageType?msg.messageType:'image';\n                    }\n                }\n\n                this.addMessage({\n                    fromBot: true,\n                    message: msg\n                });\n            }, 500 * index);\n        }\n\n    }\n\n    showStart(restart) {\n\n        store.default.dispatch({\n            type:'',\n            messages:[]\n        });\n\n        if(this.props.user.socket && this.props.user.isSound){\n            this.props.user.socket.emit('user_uttered', { type:'chat', message: 'Today quote', room: this.props.user.userId });\n        } else {\n            this.makeRequest({\n                // message:'how is the weather in london',\n                message:'Today quote',\n                messageType: Constants.request.RequestType.PARAMETER_MESSAGE,\n                messageData: [{\n                    payload: restart ? Constants.request.ParameterType.HELP : Constants.request.ParameterType.START\n                }]\n            });\n        }\n\n    }\n\n\n\n    removeSmartReplies() {\n        let messages = this.props.user.messages;\n        messages.forEach((message, index) => {\n            if(message.message.messageType === Constants.response.ResponseType.SMART_REPLY_MESSAGE) {\n                delete messages[index];\n            }\n\n        });\n        store.default.dispatch({\n            type:'',\n            messages:messages\n        })\n    }\n\n    sendHandler(message, text) {\n        const messageObject = {\n            username: this.props.username,\n            message: message,\n            fromBot: false\n        };\n\n        this.removeSmartReplies();\n        this.addMessage(messageObject);\n\n        if(this.props.user.socket && this.props.user.isSound){\n            store.default.dispatch({\n                type:EMPTY_TYPE,\n                loading:true,\n            })\n            this.props.user.socket.emit('user_uttered', { type:'chat', message: text, room: this.props.user.userId });\n        } else {\n\n            this.makeRequest(message);\n        }\n    }\n\n    addMessage(message) {\n        // Append the message to the component state\n        let messages = this.props.user.messages;\n        messages.push(message);\n\n        store.default.dispatch({\n            type:'UPDATE_MESSAGES',\n            messages:messages\n        })\n    }\n\n\n    showFeedbackModal() {\n        this.setState({showFeedback: true});\n    }\n\n    hideFeedbackModal() {\n        this.setState({showFeedback: false});\n    }\n\n    showAboutModal() {\n        this.setState({showAbout: true});\n    }\n\n    hideAboutModal() {\n        this.setState({showAbout: false});\n    }\n\n    showOverlay() {\n        this.setState({overlay: true});\n    }\n\n    hideOverlay() {\n        this.setState({overlay: false});\n    }\n\n    clearChatHistory() {\n        this.setState({messages: []});\n    }\n\n    addChatHistory(msgs) {\n        var messages = this.state.messages;\n        for (var index in msgs) {\n            messages.push(msgs[index]);\n        }\n        this.setState({messages: messages});\n    }\n\n    render() {\n        var style = {};\n        if(this.props.height) {\n            style.height = this.props.height;\n        }\n        return (\n            <div className=\"card expandOpen\" id=\"chat-app-container\" style={style}>\n\n                <Messages\n                    weather_api_key={this.props.user.weather_api_key}\n                    ChangeStateFunc={this.ChangeStateFunc}\n                    messages={this.state.messages}\n                    myWidgetParam={this.state.myWidgetParam}\n                    onSend={this.sendHandler}\n                    isAdmin={this.props.isAdmin}\n                    loading={this.props.user.loading} />\n                <ChatInput\n\n                    coordinate_lat={this.props.user.coordinate_lat}\n                    coordinate_long={this.props.user.coordinate_long}\n                    isSound={this.props.user.isSound}\n                    // createSocket={this.createSocket}\n                    loading={this.props.user.loading}\n                    socket={this.props.user.socket}\n                    userId={this.props.user.userId}\n                    isAdmin={this.props.isAdmin}\n                    onSend={this.sendHandler}\n                    showStart={this.showStart}\n                    showFeedback={this.showFeedbackModal}\n                    showAbout={this.showAboutModal}\n                    showOverlay={this.showOverlay}\n                    hideOverlay={this.hideOverlay} />\n                <Feedback\n                    isOpen={this.state.showFeedback}\n                    hide={this.hideFeedbackModal}\n                    userId={this.getUuid()} />\n                <About\n                    isOpen={this.state.showAbout}\n                    hide={this.hideAboutModal} />\n\n                {this.state.overlay && (\n                    <div className=\"overlay\"> </div>\n                )}\n                < audio id=\"response-voice\" style={{display:\"none\"}}> </audio>\n            </div>\n        );\n    }\n}\n\nChatApp.defaultProps = {\n    isAdmin: false\n};\nconst mapStateToProps = state=> ({user:state.user});\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        WebHookAction:data => WebHookAction(dispatch,data),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatApp);","import 'jquery';\nimport $ from 'jquery';\nimport M from 'materialize-css';\nimport Iframe from 'react-iframe'\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\"\nconst { logout} = require('../../redux/actions/userAction');\nconst store = require( '../../redux/store');\n\n\nclass Header extends Component{\n    constructor(props){\n        super(props)\n\n        // this.logout = this.logout.bind(this);\n        this.state = {\n            // view_mode: cookies.get('view_mode')||null,\n            // disable_menu : props.location.search.indexOf('disable_menu') > 0,\n            isSideNavOpen: false,\n            class_sideNavOpen: ''\n        }\n\n\n        this.changeSideNav = this.changeSideNav.bind(this);\n\n        this.select_regulars_header = this.select_regulars_header.bind(this);\n\n    }\n\n    componentDidMount(){\n        var options={\n              edge: 'right', // <--- CHECK THIS OUT\n        }\n        M.Sidenav.init(this.slide_out, options);\n\n\n        // var elems = document.querySelectorAll('.dropdown-trigger');\n        // var instances = M.Dropdown.init(elems, options);\n\n    }\n\n    select_regulars_header(){\n        this.changeSideNav();\n        store.default.dispatch({\n            type:'',\n            from:null\n        });\n    }\n\n    changeSideNav(){\n\n        var instance = M.Sidenav.getInstance(this.slide_out);\n        instance.close();\n\n\n    }\n\n    logout(){\n\n        this.props.logout();\n    }\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // if(this.props.user.type === \"OPEN_IFRAME\" ){\n        //     M.Sidenav.getInstance(this.slide_out).open()\n        // }\n    }\n\n    render(){\n        const {c_id} = this.props.user;\n\n        // const {disable_menu} = this.state;\n\n        return (\n\n            <nav className={'light-blue lighten-1' } role={\"navigation\"} >\n                <div className={'nav-wrapper container'}>\n                    <a id=\"logo-container\" href=\"#\" className=\"left\" style={{color:\"rgb(240, 236, 211)\", fontSize:20}}>Scarlet </a>\n\n\n                    <div className=\"right title-desc\">\n                        <span>The Next Generation (IPASE) </span><br/>\n                        <span>Internet Personal Assistant Search Engine</span>\n                    </div>\n                    <ul id=\"nav-mobile\" className=\"sidenav\" ref={slide_out => this.slide_out = slide_out}>\n\n                        <i onClick={()=>this.changeSideNav()} style={{margin:\"-14px 0\", color:\"black\"}} className=\"right material-icons\">close</i>\n\n                        <div className=\"col full-height cluster-content\" >\n\n                            {this.props.user.type ==='OPEN_IFRAME' &&\n                            <Iframe\n                                src={this.props.user.i_url}\n                                className=\"col full-width-height\"\n                            />\n                            }\n\n\n                        </div>\n                        <li>\n\n                        </li>\n\n                    </ul>\n                    <a href=\"#\" style={{display:\"none\"}} data-target=\"nav-mobile\" className=\"sidenav-trigger\"><i\n                        className=\"material-icons\">menu</i></a>\n\n                </div>\n\n\n            </nav>\n\n\n\n        )\n    }\n}\nconst mapStateToProps = (user)=> (user);\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        logout: data => logout(dispatch, data),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\n","import './App.scss'\nimport PublicRoute from \"./helpers/PublicRoute\";\nimport {BrowserRouter,Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport ChatApp from \"./components/containers/chat/ChatApp\";\nimport React, {Component} from \"react\";\nimport connect from \"react-redux/es/connect/connect\";\n\nimport Header from \"./components/elements/header\";\n\n\nclass App extends Component {\n\n\n    constructor(props){\n        super(props);\n        const { cookies } = props;\n        this.state = {\n\n\n        };\n    }\n\n    componentDidMount(){\n    }\n\n\n    render(){\n        return (\n            <React.Fragment >\n                <Header/>\n                <div className={\"container full-height\"}>\n\n                    <Switch>\n                        <PublicRoute path='/' component={ChatApp} />\n                        <Route path='*' exact={true} component={ChatApp} />\n                    </Switch>\n                </div>\n            </React.Fragment>\n        )\n    }\n\n}\n\nconst mapStateToProps = ({user}, ownProps) => ({user})\nconst mapDispatchToProps = dispatch => {\n    return {\n\n    };\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import * as serviceWorker from './serviceWorker';\nimport 'jquery';\nimport 'materialize-css/dist/css/materialize.min.css'\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-material-design/dist/css/bootstrap-material-design.css';\nimport './less/pages/app.less';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from \"react-redux\";\nimport {BrowserRouter,Redirect, Route, Switch} from \"react-router-dom\";\nimport store from './redux/store';\nimport './index.scss';\n\nimport App from './App';\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <BrowserRouter basename={\"\"}>\n                <App />\n            </BrowserRouter>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/**\n * Created by admin1 on 26/10/18.\n */\n\nconst baseUrl = document.location.protocol + \"//\" + document.location.hostname + \"/rasa\";\n// const baseUrl = \"http://localhost:3000/rasa\";\n\nconst initialState = {\n    userId:'',\n    baseUrl:baseUrl,\n    socket:null,\n    loading:false,\n    error: null,\n    messages:[],\n    myWidgetParam:[],\n    isSound:false,\n    coordinate_lat:null,\n    coordinate_long:null,\n    weather_api_key:'3b1c3da41643a03de9516d4deb798f7b',\n}\n\n\n////////////////////////////\n//\n//\n//////////////////////////////\nexport function userApp(state = initialState, action) {\n    switch (action.type) {\n\n        case 'OPEN_IFRAME':\n        case 'OPEN_CLUSTER_FOLDER':\n        case 'OUT_STEP_HOOK_PENDING':\n        case 'OUT_STEP_HOOK_ERROR':\n        case 'OUT_STEP_HOOK_SUCCESS':\n        case 'BOT_HOOK_SUCCESS':\n        case 'BOT_HOOK_PENDING':\n        case 'BOT_HOOK_ERROR':\n        case 'UPDATE_MESSAGES':\n        case '':\n        case 'CHANGE_VIEW_MODE':\n            return {...state, ...action}\n        default:\n            return state\n    }\n}\n","/**\n * Created by admin1 on 26/10/18.\n */\nimport {combineReducers} from 'redux'\nimport {userApp} from './userReducer'\n\n\n\nconst reducer = combineReducers({\n    user: userApp,\n\n})\n\nexport default reducer\n","import { createStore, applyMiddleware, compose } from 'redux'\n// import Reactotron from '../ReactotronConfig'\nimport rootReducer from './reducers/index'\n// import {echoMiddleware} from './_middlewares/index';\nimport thunk from \"redux-thunk\";\n// const middlewares = [thunk, echoMiddleware];\nconst middlewares = [thunk];\n\n\nconst composeEnhancers =  (process.env.NODE_ENV !== 'production1' &&\n    typeof window !== 'undefined' &&\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) ||\n    compose;\n\nconst store = createStore(\n    rootReducer, /* preloadedState, */\n    composeEnhancers(applyMiddleware(...middlewares)\n    )\n)\n\n\nexport default store\n","import store from '../redux/store'\nimport React from 'react'\n\n\n\n\n// const baseUrl = document.location.protocol + \"//\" + document.location.hostname + \"/rasa\";\n// const baseUrl = document.location.protocol + \"//\" + document.location.hostname + \":5005\";\n\n\nclass ApiRequest extends React.Component{\n\n    static request(url, method = 'POST', data = {}, headers = {}){\n        const redux_state = store.getState()\n        url = redux_state.user.baseUrl + url;\n\n        if(method === 'GET')\n        {\n            url = new URL(url)\n            url.search = new URLSearchParams(data)\n        }\n\n        return fetch(url, {\n            method: method, // or 'PUT'\n            //body might create problem if request method is GET and debug is true\n            body: method === 'POST'? JSON.stringify(data): null, // data can be `string` or {object}!\n            headers:{\n                ...headers,\n                'Accept': 'application/json; charset=utf-8',\n                'Content-Type': 'application/json; charset=utf-8'\n            }\n        }).then(response => {\n           // console.log('server-response: ', response)\n            if(response.status === 401)\n            {\n                window.location.href = '/'\n\n            }\n\n            return response.json();\n\n        })\n\n    }\n\n    static bindAuth(token, headers = {})\n    {\n        headers.Authorization = 'Bearer '+token\n        return headers\n    }\n\n    static get(url, data = {}, headers = {}){\n        return ApiRequest.request(url, 'GET', data, headers);\n    }\n\n    static post(url, data = {}, headers = {}){\n        return ApiRequest.request(url, 'POST', data, headers);\n    }\n\n}\n\nexport default ApiRequest\n","\nimport ApiRequest from \"../../helpers/ApiRequest\";\n\nexport const EMPTY_TYPE = '';\n\nexport const DATA_UPDATE_PENDING = 'DATA_UPDATE_PENDING';\n\n\n\nexport function WebHookAction(dispatch, data) {\n    dispatch({type: 'BOT_HOOK_PENDING', loading:true});\n    ApiRequest.post('/webhooks/rest/webhook', data)\n        .then((response) => {\n            if(!response){\n                let bot_messages = [{'text':\"Maybe this is server error.\"}]\n                dispatch({\n                    bot_messages,\n                    type: 'OUT_STEP_HOOK_SUCCESS',\n                    loading:false,\n                    sound_link:null,\n\n                });\n                return;\n\n            }\n            if(response.exception || response.error || response.errors)\n            {\n                dispatch({\n                    type: 'BOT_HOOK_ERROR',\n                    loading:false,\n                    sound_link:null,\n                    error: response.errors?response.errors:response.message\n                })\n\n            }else{\n                let bot_messages =[];\n                let sound_link = null;\n                for (let index in response) {\n                    if(response[index] && response[index].custom ){\n                        if(response[index].custom['payload'] ==='generalSearch'){\n                            let messageData = response[index].custom['data'];\n                            bot_messages.push(\n                                {\n                                    'messageType':'generalSearch',\n                                    'messageData':messageData\n                                }\n                            );\n                        }\n                        if(response[index].custom['payload'] ==='findSearch'){\n                            let messageData = response[index].custom['data'];\n                            bot_messages.push(\n                                {\n                                    'messageType':'findSearch',\n                                    'messageData':messageData,\n                                    'drop_mode':'suggestion',\n                                    'right_mode':'iframe',\n                                    'i_url':\"https://metasearch.outstep.com/?categories=general&language=en-US&q=\" + encodeURI(messageData['suggestions'][0]),\n                                }\n                            );\n                        }\n                        if(response[index].custom['payload'] ==='wikiquote'){\n                            let qotd = response[index].custom['text']\n\n                            let messageData = [{'text':qotd}];\n                            bot_messages.push(\n                                {\n                                    'messageType':'wikiquote',\n                                    'messageData':messageData\n                                }\n                            );\n                        }\n                        if(response[index].custom['payload'] ==='open_site'){\n\n                            let messageData = [];\n                            bot_messages.push(\n                                {\n                                    'right_mode': 'more',\n                                    'messageType': 'open_site',\n                                    'messageData': messageData,\n                                    'url': response[index].custom['url'],\n                                });\n\n                        }\n\n                        if(response[index].custom['payload'] ==='cardsCarousel'){\n                            let messageData = response[index].custom['data'];\n                            bot_messages.push(\n                                {\n                                    'messageType': 'cardsCarousel',\n                                    'messageData': messageData,\n                                    'keyword': response[index].custom['keyword'],\n                                });\n\n                        }\n\n                        if(response[index].custom['payload'] ==='weather'){\n                            // const city_name = response[index].custom['weather_city_name']\n                            const city_id = response[index].custom['weather_city_id']\n\n                            let messageType = 'weather';\n                            let messageData_item = {};\n                            messageData_item['weather_city_id'] = city_id;\n\n                            bot_messages.push(\n                                {\n                                    'main_weather':true,\n                                    'more_weather':false,\n                                    'messageType': messageType,\n                                    'messageData': [messageData_item],\n                                });\n\n\n                        }\n                    }else{\n                        if(response[index].hasOwnProperty('link')){\n                            sound_link =response[index]['link'];\n\n                        }\n                        bot_messages.push(response[index])\n                    }\n\n                }\n                dispatch({\n                    sound_link:sound_link,\n                    bot_messages,\n                    type: 'BOT_HOOK_SUCCESS',\n                    loading:false,\n\n                })\n\n            }\n        })\n}\n\n\n","/* eslint-disable no-unused-vars */\n(function(window) {\n\tconst VAD = function(options) {\n\t\t// Default options\n\t\tthis.options = {\n\t\t\tfftSize: 512,\n\t\t\tbufferLen: 512,\n\t\t\tvoice_stop: function() {},\n\t\t\tvoice_start: function() {},\n\t\t\tsmoothingTimeConstant: 0.99,\n\t\t\tenergy_offset: 1e-8, // The initial offset.\n\t\t\tenergy_threshold_ratio_pos: 2, // Signal must be twice the offset\n\t\t\tenergy_threshold_ratio_neg: 0.5, // Signal must be half the offset\n\t\t\tenergy_integration: 1, // Size of integration change compared to the signal per second.\n\t\t\tfilter: [\n\t\t\t\t{ f: 200, v: 0 }, // 0 -> 200 is 0\n\t\t\t\t{ f: 2000, v: 1 } // 200 -> 2k is 1\n\t\t\t],\n\t\t\tsource: null,\n\t\t\tcontext: null\n\t\t};\n\n\t\t// User options\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tfor (const option in options) {\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\tthis.options[option] = options[option];\n\t\t\t}\n\t\t}\n\n\t\t// Require source\n\t\tif (!this.options.source) { throw new Error('The options must specify a MediaStreamAudioSourceNode.'); }\n\n\t\t// Set this.options.context\n\t\tthis.options.context = this.options.source.context;\n\n\t\t// Calculate time relationships\n\t\tthis.hertzPerBin = this.options.context.sampleRate / this.options.fftSize;\n\t\tthis.iterationFrequency = this.options.context.sampleRate / this.options.bufferLen;\n\t\tthis.iterationPeriod = 1 / this.iterationFrequency;\n\n\t\tconst DEBUG = true;\n\t\tif (DEBUG) {\n\t\t\tconsole.log(\n\t\t\t\t`${'Vad'\n      + ' | sampleRate: '}${this.options.context.sampleRate\n\t\t\t\t} | hertzPerBin: ${this.hertzPerBin\n\t\t\t\t} | iterationFrequency: ${this.iterationFrequency\n\t\t\t\t} | iterationPeriod: ${this.iterationPeriod}`\n\t\t\t);\n\t\t}\n\n\t\tthis.setFilter = function(shape) {\n\t\t\tthis.filter = [];\n\t\t\tfor (let i = 0, iLen = this.options.fftSize / 2; i < iLen; i += 1) {\n\t\t\t\tthis.filter[i] = 0;\n\t\t\t\tfor (let j = 0, jLen = shape.length; j < jLen; j += 1) {\n\t\t\t\t\tif (i * this.hertzPerBin < shape[j].f) {\n\t\t\t\t\t\tthis.filter[i] = shape[j].v;\n\t\t\t\t\t\tbreak; // Exit j loop\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.setFilter(this.options.filter);\n\n\t\tthis.ready = {};\n\t\tthis.vadState = false; // True when Voice Activity Detected\n\n\t\t// Energy detector props\n\t\tthis.energy_offset = this.options.energy_offset;\n\t\tthis.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n\t\tthis.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n\t\tthis.voiceTrend = 0;\n\t\tthis.voiceTrendMax = 10;\n\t\tthis.voiceTrendMin = -10;\n\t\tthis.voiceTrendStart = 5;\n\t\tthis.voiceTrendEnd = -5;\n\n\t\t// Create analyser\n\t\tthis.analyser = this.options.context.createAnalyser();\n\t\tthis.analyser.smoothingTimeConstant = this.options.smoothingTimeConstant; // 0.99;\n\t\tthis.analyser.fftSize = this.options.fftSize;\n\n\t\tthis.floatFrequencyData = new Float32Array(this.analyser.frequencyBinCount);\n\n\t\t// Setup local storage of the Linear FFT data\n\t\tthis.floatFrequencyDataLinear = new Float32Array(this.floatFrequencyData.length);\n\n\t\t// Connect this.analyser\n\t\tthis.options.source.connect(this.analyser);\n\n\t\t// Create ScriptProcessorNode\n\t\tthis.scriptProcessorNode = this.options.context.createScriptProcessor(this.options.bufferLen, 1, 1);\n\n\t\t// Connect scriptProcessorNode (Theretically, not required)\n\t\tthis.scriptProcessorNode.connect(this.options.context.destination);\n\n\t\t// Create callback to update/analyze floatFrequencyData\n\t\tconst self = this;\n\t\tthis.scriptProcessorNode.onaudioprocess = function(event) {\n\t\t\tself.analyser.getFloatFrequencyData(self.floatFrequencyData);\n\t\t\tself.update();\n\t\t\tself.monitor();\n\t\t};\n\n\t\t// Connect scriptProcessorNode\n\t\tthis.options.source.connect(this.scriptProcessorNode);\n\n\t\t// log stuff\n\t\tthis.logging = false;\n\t\tthis.log_i = 0;\n\t\tthis.log_limit = 100;\n\n\t\tthis.triggerLog = function(limit) {\n\t\t\tthis.logging = true;\n\t\t\tthis.log_i = 0;\n\t\t\tthis.log_limit = typeof limit === 'number' ? limit : this.log_limit;\n\t\t};\n\n\t\tthis.log = function(msg) {\n\t\t\tif (this.logging && this.log_i < this.log_limit) {\n\t\t\t\tthis.log_i += 1;\n\t\t\t\tconsole.log(msg);\n\t\t\t} else {\n\t\t\t\tthis.logging = false;\n\t\t\t}\n\t\t};\n\n\t\tthis.update = function() {\n\t\t\t// Update the local version of the Linear FFT\n\t\t\tconst fft = this.floatFrequencyData;\n\t\t\tfor (let i = 0, iLen = fft.length; i < iLen; i += 1) {\n\t\t\t\t// eslint-disable-next-line no-restricted-properties\n\t\t\t\tthis.floatFrequencyDataLinear[i] = Math.pow(10, fft[i] / 10);\n\t\t\t}\n\t\t\tthis.ready = {};\n\t\t};\n\n\t\tthis.getEnergy = function() {\n\t\t\tif (this.ready.energy) {\n\t\t\t\treturn this.energy;\n\t\t\t}\n\n\t\t\tlet energy = 0;\n\t\t\tconst fft = this.floatFrequencyDataLinear;\n\n\t\t\tfor (let i = 0, iLen = fft.length; i < iLen; i += 1) {\n\t\t\t\tenergy += this.filter[i] * fft[i] * fft[i];\n\t\t\t}\n\n\t\t\tthis.energy = energy;\n\t\t\tthis.ready.energy = true;\n\n\t\t\treturn energy;\n\t\t};\n\n\t\tthis.monitor = function() {\n\t\t\tconst energy = this.getEnergy();\n\t\t\tconst signal = energy - this.energy_offset;\n\n\t\t\tif (signal > this.energy_threshold_pos) {\n\t\t\t\tthis.voiceTrend = (this.voiceTrend + 1 > this.voiceTrendMax) ? this.voiceTrendMax : this.voiceTrend + 1;\n\t\t\t} else if (signal < -this.energy_threshold_neg) {\n\t\t\t\tthis.voiceTrend = (this.voiceTrend - 1 < this.voiceTrendMin) ? this.voiceTrendMin : this.voiceTrend - 1;\n\t\t\t} else {\n\t\t\t\t// voiceTrend gets smaller\n\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\tif (this.voiceTrend > 0) {\n\t\t\t\t\tthis.voiceTrend -= 1;\n\t\t\t\t} else if (this.voiceTrend < 0) {\n\t\t\t\t\tthis.voiceTrend += 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet start = false; let\n\t\t\t\tend = false;\n\t\t\tif (this.voiceTrend > this.voiceTrendStart) {\n\t\t\t\t// Start of speech detected\n\t\t\t\tstart = true;\n\t\t\t} else if (this.voiceTrend < this.voiceTrendEnd) {\n\t\t\t\t// End of speech detected\n\t\t\t\tend = true;\n\t\t\t}\n\n\t\t\t// Integration brings in the real-time aspect through the relationship with the frequency this functions is called.\n\t\t\tconst integration = signal * this.iterationPeriod * this.options.energy_integration;\n\n\t\t\t// Idea?: The integration is affected by the voiceTrend magnitude? - Not sure. Not doing atm.\n\n\t\t\t// The !end limits the offset delta boost till after the end is detected.\n\t\t\tif (integration > 0 || !end) {\n\t\t\t\tthis.energy_offset += integration;\n\t\t\t} else {\n\t\t\t\tthis.energy_offset += integration * 10;\n\t\t\t}\n\t\t\tthis.energy_offset = this.energy_offset < 0 ? 0 : this.energy_offset;\n\t\t\tthis.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n\t\t\tthis.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n\t\t\t// Broadcast the messages\n\t\t\tif (start && !this.vadState) {\n\t\t\t\tthis.vadState = true;\n\t\t\t\tthis.options.voice_start();\n\t\t\t}\n\t\t\tif (end && this.vadState) {\n\t\t\t\tthis.vadState = false;\n\t\t\t\tthis.options.voice_stop();\n\t\t\t}\n\n\t\t\tthis.log(\n\t\t\t\t`e: ${energy\n\t\t\t\t} | e_of: ${this.energy_offset\n\t\t\t\t} | e+_th: ${this.energy_threshold_pos\n\t\t\t\t} | e-_th: ${this.energy_threshold_neg\n\t\t\t\t} | signal: ${signal\n\t\t\t\t} | int: ${integration\n\t\t\t\t} | voiceTrend: ${this.voiceTrend\n\t\t\t\t} | start: ${start\n\t\t\t\t} | end: ${end}`\n\t\t\t);\n\n\t\t\treturn signal;\n\t\t};\n\t};\n\n\t// eslint-disable-next-line no-param-reassign\n\twindow.VAD = VAD;\n}(window));\n"],"sourceRoot":""}